@use 'sass:color';
@use '../../styles/base/variables' as vars;

.counter-v2 {
  display: flex;
  flex-direction: column;
  align-items: center;
  margin: 2rem 0;

  &__wrapper {
    position: relative;
    padding: 0.5rem;
    background: vars.$black;
    border: 1px solid rgba(vars.$color-yellow, 0.2); // Sutil marco externo
  }

  &__ticker {
    display: flex;
    align-items: center;
    background: vars.$black;
    border: 6px solid vars.$color-yellow;
    padding: 2rem 4rem;
    position: relative;
    box-shadow:
      20px 20px 0 vars.$black,
      20px 20px 0 2px vars.$color-yellow; // Doble sombra brutalista

    font-family: vars.$font-primary;
    font-size: clamp(4rem, 15vw, 8rem);
    font-weight: 900;
    line-height: 1;
    color: vars.$color-yellow;

    @media (max-width: 768px) {
      padding: 1.5rem 2.5rem;
      border-width: 4px;
      box-shadow:
        12px 12px 0 vars.$black,
        12px 12px 0 2px vars.$color-yellow;
    }
  }

  &__badge {
    position: absolute;
    top: 0;
    left: 0;
    transform: translate(-20%, -50%);
    background: vars.$color-yellow;
    color: vars.$black;
    font-size: 14px;
    padding: 6px 15px;
    font-weight: 900;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    box-shadow: 6px 6px 0 vars.$black;
    z-index: 2;

    @media (max-width: 768px) {
      font-size: 10px;
      padding: 4px 10px;
    }
  }

  &__digits {
    display: flex;
    gap: 0.1em;
    filter: drop-shadow(4px 4px 0 rgba(vars.$black, 0.5));
  }

  &__footer {
    margin-top: 2.5rem;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.5rem;
  }

  &__label {
    font-size: clamp(0.9rem, 1.5vw, 1.25rem);
    font-weight: 800;
    text-transform: uppercase;
    letter-spacing: 0.5em;
    color: vars.$color-yellow;
    text-shadow: 2px 2px 0 vars.$black;
  }

  &__sublabel {
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.3em;
    color: vars.$white;
    opacity: 0.4;
    font-style: italic;
  }

  // Mini variant for integration in tight spaces
  &--mini {
    margin: 0;

    .counter-v2__wrapper {
      padding: 0.2rem;
      border-width: 1px;
    }

    .counter-v2__ticker {
      padding: 0.5rem 1rem;
      border-width: 3px;
      font-size: 2rem;
      box-shadow:
        6px 6px 0 vars.$black,
        6px 6px 0 1px vars.$color-yellow;
    }

    .counter-v2__digits {
      gap: 0;
      filter: none;
    }

    .counter-digit {
      width: 0.65em;
    }
  }

  // Hero Mini: A high-impact social proof badge (CELEBRATION MODE)
  &--hero-mini {
    margin: vars.$space-lg 0;
    width: 100%;
    max-width: 320px;
    position: relative;

    // Celebration Halo (The Glow)
    &::before {
      content: '';
      position: absolute;
      inset: -20px;
      background: radial-gradient(circle, rgba(vars.$color-yellow, 0.15) 0%, transparent 70%);
      filter: blur(20px);
      z-index: -1;
      animation: celebration-pulse 4s ease-in-out infinite;
    }

    .counter-v2__wrapper {
      display: flex;
      flex-direction: column;
      align-items: stretch;
      gap: 0;
      border: 3px solid vars.$color-yellow;
      padding: 0;
      background: vars.$black;
      position: relative;

      // Layered Brutalist Depth
      box-shadow:
        8px 8px 0 vars.$black,
        8px 8px 0 2px vars.$color-yellow,
        16px 16px 0 -2px vars.$black,
        16px 16px 0 rgba(vars.$white, 0.05);

      transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);

      &:hover {
        transform: translate(-4px, -4px);
        box-shadow:
          12px 12px 0 vars.$black,
          12px 12px 0 2px vars.$color-yellow,
          24px 24px 40px rgba(vars.$color-yellow, 0.1);
      }
    }

    .counter-v2__ticker {
      padding: 1.5rem 1rem;
      border: none;
      border-top: 3px solid vars.$color-yellow;
      border-bottom: 3px solid vars.$color-yellow;
      box-shadow: none;
      font-size: clamp(3rem, 8vw, 4.5rem); // Monumental sizing
      justify-content: center;
      background: linear-gradient(to bottom, rgba(vars.$white, 0.03), transparent);
    }

    .counter-v2__badge {
      position: static;
      transform: none;
      width: 100%;
      text-align: center;
      font-size: 0.7rem; // Slightly larger for better readability
      padding: 10px 12px;
      box-shadow: none;
      background: vars.$color-yellow;
      color: vars.$black;
      letter-spacing: 0.2em;
      font-weight: 900;
      text-transform: uppercase;
    }

    .counter-digit {
      width: 0.65em;
      background: rgba(vars.$color-yellow, 0.02);
      border-radius: 4px;
      margin: 0 2px;
    }

    @media (max-width: 820px) {
      max-width: 300px; // Slightly wider
      margin: vars.$space-sm 0;

      .counter-v2__ticker {
        padding: 0.75rem 0.5rem; // Tighter
        font-size: 2.5rem; // Smaller but still impactful
      }

      .counter-v2__badge {
        font-size: 0.55rem; // Smaller font
        padding: 6px 8px;
        letter-spacing: 0.1em; // Reduced spacing to fit text
        white-space: nowrap;
      }
    }
  }
}

@keyframes celebration-pulse {
  0%,
  100% {
    opacity: 0.4;
    transform: scale(1);
  }
  50% {
    opacity: 0.8;
    transform: scale(1.1);
  }
}

.counter-digit {
  height: 1em;
  width: 0.68em;
  position: relative;
  overflow: hidden;
  display: inline-block;
  background: rgba(vars.$white, 0.03); // Sutil textura de fondo
  border-radius: 2px;
  font-family: 'Courier New', Courier, monospace; // Monospaced for technical feel

  &__track {
    display: flex;
    flex-direction: column;
    transition: transform 3.5s cubic-bezier(0.16, 1, 0.3, 1); // Heavier movement
  }

  &__num {
    height: 1em;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    border-bottom: 1px solid rgba(vars.$color-yellow, 0.05);
  }
}
